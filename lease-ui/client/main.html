<head>
  <title>Lease Agreement</title>
  <h1 id = "output_header_line1" style = "text-align:center;"><big><strong><bold><u>Lease Agreement</h1>
</head>

<body>
   <fieldset>
  <br>
  <legend><big><b>Add Lease Issuer</b></big></legend>
  <input id="issuer_name" type="text" placeholder="Issuer Name">
  <input id="issuer_address" type="text" placeholder="Issuer Address">
  <input id="issuer_details" type="text" placeholder="issuer Details"><br>
  <button id="button_add_issuer">Add Issuer</button>
  </fieldset>
  
  <br>

  <fieldset>
  <legend><big><b>Issuer details</b></big></legend>
  <input id="get_issuer_address" type="text" placeholder="Enter Issuer Address"><br>
  <button id="button_get_issuer_details">Get Details</button><br>
  <pre id="issuer_details_name"> </pre><br>
  <pre id="issuer_details_details"> </pre><br>
  </fieldset>

  <br>

  <fieldset>
  <legend><big><b>Create Lease</b></big></legend>
  <input id="make_lease_UIN" type="text" placeholder="UIN"><br>
  <input id="make_lease_from_name" type="text" placeholder="Lessee Name 1"><br>
  <input id="make_lease_to_name" type="text" placeholder="Lessee Name 2"><br>
  <input id="make_lease_to_address" type="text" placeholder="Lessee Name 2 address"><br>
  <input id="make_lease_addenda" type="text" placeholder="addenda"><br>
  <input id="make_lease_date" type="text" placeholder="Date"><br>
  <button id="button_make_lease">Create Lease</button><br>
  </fieldset>  

  <br>

  <fieldset>
  <legend><big><b>View Lease</b></big></legend>
  <input id="view_lease_UIN" type="text" placeholder="UIN">
  <button id="button_view_lease"> View Lease</button>
  <pre id="view_lease_line1" style="text-align: center"> <font size="7"> </font> </pre><br>
  <pre id="view_lease_line2" style="text-align: center"> </pre><br>
  <pre id="view_lease_line3" style="text-align: center"> </pre><br>
  <pre id="view_lease_line4" style="text-align: center"> </pre><br>
  <pre id="view_lease_line5" style="text-align: center"> </pre><br>
  <pre id="view_lease_line6" style="text-align: center"> </pre><br>
  </fieldset>
  
  <br>

  <fieldset>
  <legend><big><b>View Status</b></big></legend>
  <input id="view_lease_approved_UIN" type="text" placeholder="UIN">
  <button id="button_view_lease_approved"> View Approval</button>
  <pre id="view_lease_approved_line1" style="text-align: center"> <font size="7"> </font> </pre><br>
  <pre id="view_lease_approved_line2" style="text-align: center"> </pre><br>
  <pre id="view_lease_approved_line3" style="text-align: center"> </pre><br>
  <pre id="view_lease_approved_line4" style="text-align: center"> </pre><br>
  <pre id="view_lease_approved_line5" style="text-align: center"> </pre><br>
  </fieldset>

  <script>
    var contractAddress = "0xccc1e50aadfa110a63027079f732da076df69548";
    var abi = [{"constant":false,"inputs":[{"name":"_UIN","type":"bytes32"},{"name":"_from","type":"string"},{"name":"_to","type":"string"},{"name":"_toAddress","type":"address"},{"name":"_addenda","type":"string"},{"name":"_date","type":"string"}],"name":"makeLease","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_address","type":"address"}],"name":"removeIssuer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_UIN","type":"bytes32"}],"name":"displayLease","outputs":[{"name":"","type":"string"},{"name":"","type":"address"},{"name":"","type":"string"},{"name":"","type":"address"},{"name":"","type":"string"},{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_address","type":"address"}],"name":"IssuerInfoDetails","outputs":[{"name":"","type":"string"},{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_UIN","type":"bytes32"}],"name":"approve3","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_UIN","type":"bytes32"}],"name":"displayApproved","outputs":[{"name":"","type":"address"},{"name":"","type":"address"},{"name":"","type":"address"},{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_UIN","type":"bytes32"}],"name":"removeLease","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_UIN","type":"bytes32"}],"name":"approve2","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_UIN","type":"bytes32"}],"name":"approve1","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_IssuerName","type":"string"},{"name":"_IssuerDetails","type":"string"},{"name":"_address","type":"address"}],"name":"addIssuer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"}];
    var data = "";

    //create lease holder
    leaseContract = web3.eth.contract(abi).at(contractAddress);

    //add lease issuer
    var issuerName = document.getElementById("issuer_name");
    var issuerAddress = document.getElementById("issuer_address");
    var issuerDetails = document.getElementById("issuer_details");
    var buttonAddIssuer = document.getElementById("button_add_issuer");

    //display issuer details
    var getIssuerAddress = document.getElementById("get_issuer_address");
    var buttonGetIssuerDetails = document.getElementById("button_get_issuer_details");
    var issuerDetailsName = document.getElementById("issuer_details_name");
    var issuerDetailsDetails = document.getElementById("issuer_details_details");

    //create lease
    var makeLeaseUIN = document.getElementById("make_lease_UIN");
    var makeLeaseName1 = document.getElementById("make_lease_from_name");
    var makeLeaseName2 = document.getElementById("make_lease_to_name");
    var makeLeaseToAddress = document.getElementById("make_lease_to_address");
    var makeLeaseAddenda = document.getElementById("make_lease_addenda");
    var makeLeaseDate = document.getElementById("make_lease_date");
    var buttonMakeLease = document.getElementById("button_make_lease");

    //view lease
    var viewLeaseUIN = document.getElementById("view_lease_UIN");
    var buttonViewLease = document.getElementById("button_view_lease");
    var viewLeaseLine1 = document.getElementById("view_lease_line1");
    var viewLeaseLine2 = document.getElementById("view_lease_line2");
    var viewLeaseLine3 = document.getElementById("view_lease_line3");
    var viewLeaseLine4 = document.getElementById("view_lease_line4");
    var viewLeaseLine5 = document.getElementById("view_lease_line5");
    var viewLeaseLine6 = document.getElementById("view_lease_line6");
    var viewLeaseLine7 = document.getElementById("view_lease_line7");
    var viewLeaseLine8 = document.getElementById("view_lease_line8");

    //view Status
    var viewApprovedUIN = document.getElementById("view_lease_approved_UIN");
    var buttonViewLeaseApproved = document.getElementById("button_view_lease_approved");
    var viewLeaseLine1 = document.getElementById("view_lease_approved_line1");
    var viewLeaseLine2 = document.getElementById("view_lease_approved_line2");
    var viewLeaseLine3 = document.getElementById("view_lease_approved_line3");
    var viewLeaseLine4 = document.getElementById("view_lease_approved_line4");
    var viewLeaseLine5 = document.getElementById("view_lease_approved_line5");
    var viewLeaseLine6 = document.getElementById("view_lease_approved_line6");
    var viewLeaseLine7 = document.getElementById("view_lease_approved_line7");
    var viewLeaseLine8 = document.getElementById("view_lease_approved_line8");

    //add Issuer
    buttonAddIssuer.addEventListener('click', function(){
      leaseContract.addIssuer(issuerName.value,
                              issuerDetails.value,
                              issuerAddress.value, function(err, res){

          console.log(res);
          console.log(err);
      });
    })

    //view issuer
    buttonGetIssuerDetails.addEventListener('click', function(){
      leaseContract.IssuerInfoDetails(getIssuerAddress.value, function(err, res){
        issuerDetailsName.innerHTML = "<strong><big><b>Issuer name :    " + res[0];
        issuerDetailsDetails.innerHTML = "<strong><b><big>Issuer Details : " + res[1];
        console.log(res);
        console.log(err);
      });
    })


    //make/create lease 
    buttonMakeLease.addEventListener('click', function(){
      leaseContract.makeLease(makeLeaseUIN.value,
                              makeLeaseName1.value,
                              makeLeaseName2.value,
                              makeLeaseToAddress.value,
                              makeLeaseAddenda.value,
                              makeLeaseDate.value, function(err, res){
                                res;
                                console.log(res);
                                console.log(err);
                              });
    })


    //view lease
    buttonViewLease.addEventListener('click', function(){
      leaseContract.displayLease(viewLeaseUIN.value, function(err, res){
        view_lease_line1.innerHTML = "<b><big><big><big><big><big><big><u><font size = '6'> </font> Lease Agreement";
        view_lease_line2.innerHTML = "<big><b>The agreement for " + res[4] + " is issued to ";
        view_lease_line3.innerHTML = "<b><big><big><big><big><em><strong>" + res[0] + "(" + res[1] + ")";
        view_lease_line4.innerHTML = "<b><big><big><em><strong>" + "and";
        view_lease_line5.innerHTML = "<b><big><big><big><big><em><strong>" + res[2] + "(" + res[3] + ")";
        view_lease_line6.innerHTML = "<big><b>Signed on : " + res[5];

        console.log(res);
        console.log(err);

      });
    })

    //view status 
    buttonViewLeaseApproved.addEventListener('click', function(){
      leaseContract.displayApproved(viewApprovedUIN.value, function (err, res){
        view_lease_approved_line1.innerHTML = "signatory 1 " + res[0];
        view_lease_approved_line1.innerHTML = "signatory 2 " + res[1];
        view_lease_approved_line1.innerHTML = "signatory 3 " + res[2];
        view_lease_approved_line1.innerHTML = "status " + res[3];
      });
    })
    
  </script>

</body>